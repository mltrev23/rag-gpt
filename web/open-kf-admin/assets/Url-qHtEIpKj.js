import{r as a,ae as N,G as l,x as s,E as w,af as I,ag as x}from"./index-IsWlkGSj.js";import{S as D,a as T}from"./SplitListDialog-uNqNQlnt.js";import{L as z}from"./LinkTable-zekS9yG1.js";import{T as C}from"./textarea-Zvl486mz.js";import"./index-79YuXg0o.js";import"./loading-fCZkUwNQ.js";const G=()=>{const[n,r]=a.useState(""),[p,h]=a.useState(!0),[f,o]=a.useState(!1),[d,u]=a.useState([]),[g,j]=a.useState(),[S,L]=a.useState(!1);a.useEffect(()=>{c()},[]);const c=async()=>{try{const{data:{url_list:e}}=await N();u(e)}catch(e){l.error(e.message||"Failed to get link list.")}h(!1)},U=async e=>{await I(e),u(t=>t.filter(i=>!e.includes(i.id))),l.success("Deleted successfully")},b=async e=>{await x(d.filter(t=>e.includes(t.id)).map(t=>t.url)),c(),l.success("Updated successfully")},m=(e,t)=>{L(e),j(t)},v=e=>{const t=e.target.value,i=t.split(`
`).filter(k=>k.trim()!=="");i.length>10?(l.error("You can only add up to 10 URLs at a time."),r(i.slice(0,10).join(`
`))):r(t)},y=async()=>{o(!0);try{await x(n.split(`
`).filter(e=>e.trim()!=="")),c(),l.success("Added successfully")}catch(e){l.error(e.message||"Failed to add urls.")}r(""),o(!1)};return s.jsx("div",{className:"mt-[5vh]",children:s.jsxs("div",{className:"mb-10 rounded border border-zinc-200",children:[s.jsx("div",{className:"border-b border-zinc-200 px-5 py-4",children:s.jsx("h3",{className:"text-xl font-semibold leading-6 text-zinc-900 ",children:"IsolatedUrl"})}),s.jsx("div",{className:"p-5",children:s.jsxs("div",{children:[s.jsxs("div",{children:[s.jsx("small",{className:"text-sm font-medium leading-none",children:"Url"}),s.jsx("div",{className:"flex w-full items-center space-x-2 mt-2",children:s.jsx(C,{value:n,onChange:v,rows:10})})]}),s.jsx("p",{className:"mt-5 text-sm text-zinc-500 dark:text-zinc-300",children:"Enter each URL in a new line. This will crawl all the links starting with the URL."}),s.jsx("div",{className:"flex justify-end",children:s.jsx(w,{loading:f,className:"text-xs font-normal h-8",onClick:y,disabled:!n.trim(),children:"Submit"})}),s.jsxs("div",{className:"pt-8",children:[s.jsxs("div",{children:[s.jsx(D,{content:"Included Urls"}),s.jsx(z,{links:d,loading:p,deleteLinks:U,updateLinks:b,onSelectLink:e=>m(!0,e)})]}),s.jsx(T,{open:S,selectedUrl:g,onOpenChange:m})]})]})})]})})};export{G as Urls};
